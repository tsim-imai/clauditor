# Clauditor - Claude Code 使用状況ダッシュボード

Claude Code の API 使用ログを自動的に解析し、トークン使用量とコストを可視化する Electron デスクトップアプリケーションです。

![Clauditor Dashboard](https://via.placeholder.com/800x400?text=Clauditor+Dashboard+Preview)

## 🎯 機能

### 📊 **時間別分析ダッシュボード**
- **動的時間フィルター**: 今日・今週・今月・今年・全期間での切り替え
- **期間対応統計カード**: 選択期間に応じた使用量、コスト、使用時間、比較データ
- **Chart.js統合**: インタラクティブな使用量推移、時間別パターン、プロジェクト別分布、週別比較チャート
- **使用傾向分析**: 平均日使用量、ピーク時間、トッププロジェクト等の洞察

### 📅 **カレンダービュー**
- **月間カレンダー**: 日別使用量の視覚的ヒートマップ表示
- **5段階色分け**: 使用量レベルに応じた直感的な色分け
- **日付詳細**: クリックで選択日の詳細統計とプロジェクト別チャート
- **リアルタイム更新**: データ変更時の自動カレンダー更新

### 🔧 **システム機能**
- **自動プロジェクトスキャン**: `~/.claude/projects/` 内のプロジェクトを自動検出
- **JSONL ログ解析**: Claude Code の使用ログファイルを自動読み込み・解析
- **ネイティブファイルアクセス**: Electron によるネイティブファイルシステムアクセス
- **リアルタイム監視**: ファイルシステム変更の自動検出・更新
- **高性能キャッシュ**: メモリ効率的なLRUキャッシュシステム
- **為替レート自動取得**: API連携による自動USD/JPY換算（24時間毎更新）
- **ダークモード完全対応**: 全コンポーネントでのライト/ダークテーマ切り替え
- **レスポンシブデザイン**: モバイル・タブレット・デスクトップ対応

## 🚀 クイックスタート

### 前提条件

- Node.js 18.0.0 以上
- npm または yarn

### インストールと起動

```bash
# リポジトリをクローン
git clone https://github.com/tsim-imai/clauditor.git
cd clauditor

# 依存関係をインストール
npm install

# Electron アプリを起動
npm run dev

# または、配布版DMGを作成
npm run build:mac
```

## 🛠 開発コマンド

```bash
# 開発関連
npm run dev              # Electron 開発モード（フロントエンド + バックエンド）
npm run electron:dev     # Electron のみ開発モード

# ビルド関連
npm run build            # プロダクションビルド
npm run build:mac        # macOS 配布パッケージ作成
npm run build:win        # Windows 配布パッケージ作成
npm run build:linux      # Linux 配布パッケージ作成

# その他
npm run lint             # ESLint チェック
npm run preview          # プロダクションプレビュー
```

## 📊 現在の実装状況

### ✅ 完了済み（プロダクション版）
- **🎨 モダンUI実装**: Vanilla HTML+JS+CSS による高速でモダンなダッシュボード
- **📊 時間別分析**: Chart.js統合による包括的なデータ可視化
- **📅 カレンダービュー**: 日別使用量ヒートマップと詳細分析
- **🔄 動的期間フィルター**: リアルタイム統計カード更新
- **💱 為替レート統合**: 自動API取得とJPY換算
- **⚡ Electron デスクトップアプリ**: ネイティブファイルアクセス対応
- **📁 実際のファイルシステムアクセス**: `~/.claude/projects/` 自動スキャン
- **👁️ リアルタイムファイル監視**: chokidar による変更検出
- **💾 高性能キャッシュシステム**: メモリ効率的なLRUキャッシュ
- **📦 配布パッケージ**: macOS DMG/ZIP 形式

### 🔄 継続的改善
- Windows/Linux 配布パッケージ
- データエクスポート機能（CSV/PDF）
- より詳細な使用統計分析
- プロジェクト別設定・フィルタリング

詳細は [TODO.md](./TODO.md) を参照してください。

## 🏗 技術スタック

### フロントエンド
- **Vanilla JavaScript** - 高速でシンプルなフロントエンド
- **CSS Custom Properties** - モダンなスタイリングシステム
- **Chart.js** - インタラクティブなデータ可視化
- **Google Material Icons** - 一貫したアイコンシステム

### デスクトップアプリ
- **Electron** - ネイティブデスクトップアプリ
- **electron-builder** - アプリケーションパッケージング
- **chokidar** - ファイルシステム監視

### データ処理・API
- **ExchangeRate-API** - リアルタイム為替レート取得
- **JSONL** パーサー - カスタム実装
- **ストリーミング処理** - 大容量ファイル対応
- **LRU キャッシュ** - メモリ効率化

### 開発・ビルド
- **Vite** - 高速開発環境
- **TypeScript** - Electronバックエンド
- **ESLint** - コード品質管理

## 📁 プロジェクト構造

```
clauditor/
├── public/                 # フロントエンド（Vanilla HTML+JS+CSS）
│   ├── index.html               # メインHTML（ダッシュボード + カレンダー）
│   ├── app.js                   # アプリケーションロジック
│   └── styles.css               # モダンCSS（ダークモード対応）
├── electron/               # Electron バックエンド
│   ├── main.ts                  # メインプロセス（TypeScript）
│   └── preload.ts               # プリロードスクリプト
├── dist-electron/          # ビルド済みElectronファイル
├── release/                # 配布パッケージ（macOS DMG/ZIP）
└── package.json
```

## 🎨 UI/UX 特徴

### 📊 **ダッシュボード画面**
- **時間フィルターバー**: 5つの期間（今日・今週・今月・今年・全期間）
- **統計カード**: 期間に応じて動的に変化する4つの主要指標
- **チャートグリッド**: 4つのインタラクティブチャート（使用量推移・時間パターン・プロジェクト分布・週別比較）
- **詳細統計**: 使用傾向分析とコンパクトプロジェクト一覧

### 📅 **カレンダー画面**
- **月間ナビゲーション**: 前月・次月・今日へのジャンプ
- **使用量ヒートマップ**: 5段階の色分けによる視覚的使用量表示
- **日付詳細サイドバー**: 選択日の統計とプロジェクト別チャート
- **使用量レベル凡例**: 未使用から最高使用までの5段階表示

## 🔧 設定とカスタマイズ

### プロジェクトパス設定
- デフォルト: `~/.claude/projects/`
- カスタムパス: 設定画面で任意のディレクトリを指定可能
- パス検証: リアルタイムでアクセス可能性を確認

### 為替レート設定
- **自動取得**: ExchangeRate-API連携による24時間毎自動更新
- **手動設定**: 設定画面での任意レート設定
- **フォールバック**: API失敗時のバックアップAPI対応

### ダークモード
ヘッダーの月/太陽アイコンでライト/ダークテーマを切り替えできます。全コンポーネントがテーマに対応しています。

## 🔒 パフォーマンス最適化

- **LRU キャッシュ**: メモリ効率的なデータキャッシュ
- **ストリーミング処理**: 大容量ファイル（>10MB）対応
- **リアルタイム監視**: chokidar による効率的な変更検出
- **増分更新**: 変更されたファイルのみ再読み込み
- **Chart.js最適化**: レスポンシブ設定とテーマ連動

## 🤝 貢献

プルリクエストや Issue の報告を歓迎します。

## 📄 ライセンス

MIT License

## 🔗 関連リンク

- [Claude Code](https://claude.ai/code) - Claude の公式 CLI ツール
- [TODO.md](./TODO.md) - 開発ロードマップ
- [CLAUDE.md](./CLAUDE.md) - 開発者向けガイド